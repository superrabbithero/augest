"use strict";(self["webpackChunkaugest"]=self["webpackChunkaugest"]||[]).push([[6321],{50593:function(e,t,n){n.r(t),n.d(t,{default:function(){return X}});n(82481);var a=n(19812),i=n(55893),r=n(44220),s={class:"line-content-center"},o=(0,a._)("label",null,"日期：",-1),l={class:"line-content-center"},u=(0,a._)("label",null,"期限：",-1),d={class:"line-content-center"},c=(0,a._)("label",null,"不重复",-1),m=(0,a._)("label",null,null,-1),g=(0,a._)("label",null,"每天",-1),h=(0,a._)("label",null,"每周",-1),p=(0,a._)("label",null,"每月",-1),f=(0,a._)("label",null,"每年",-1),v=(0,a._)("label",null,"艾宾豪斯记忆法",-1),D={class:"line-content-center"},w={class:"line-content-center"},y=(0,a._)("label",null,"紧急",-1),M=(0,a._)("label",null,"重要",-1),k={class:"line-content-center left"},b={class:"card-content main-content",style:{"text-align":"left"},ref:"fqtMain"},_={class:"calendar-list"},x=["onClick"],C={key:0,class:"date"},N={key:1,class:"date"},W={key:2,class:"date"},I={key:3,class:"date"},L=["id"],U=["onClick"],F=["onPointerdown"],V=["id"],E={class:"list-item",style:{display:"flex","justify-content":"center"}},T={class:"axes x"},S=(0,a._)("div",{style:{"background-color":"#F96635"}},"重要",-1),Y=[S],z={class:"axes y"},P=(0,a._)("div",{style:{"background-color":"#f9A822"}},"紧急",-1),j=[P];function B(e,t,n,S,P,B){var Z=(0,a.up)("calender"),q=(0,a.up)("svg-icon"),A=(0,a.up)("my-model");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(A,{show:P.modal_show.addPlanShow,modalKey:"addPlanShow"},{default:(0,a.w5)((function(){return[(0,a._)("div",s,[o,(0,a.Wm)(Z,{language:"EN",type:"input",style:{width:"150px"},class:"form-input",modelValue:P.management.date,"onUpdate:modelValue":t[0]||(t[0]=function(e){return P.management.date=e})},null,8,["modelValue"]),(0,a.Wm)(q,{class:(0,i.C_)({"text-button":!0,action:B.compareDate(P.management.date)}),name:"today",size:"16",onClick:t[1]||(t[1]=function(e){return B.getManagementDate()})},null,8,["class"]),(0,a.Wm)(q,{class:(0,i.C_)({"text-button":!0,action:B.compareDate(P.management.date,1)}),name:"tomorrow",size:"16",onClick:t[2]||(t[2]=function(e){return B.getManagementDate(1)})},null,8,["class"])]),(0,a._)("div",l,[u,(0,a.Wm)(Z,{language:"EN",type:"datetime",style:{width:"150px"},class:"form-input",modelValue:P.management.deadline,"onUpdate:modelValue":t[3]||(t[3]=function(e){return P.management.deadline=e})},null,8,["modelValue"]),(0,a.Wm)(q,{class:"text-button",name:"delete02",size:"16",onClick:t[4]||(t[4]=function(e){return P.management.deadline=null})})]),(0,a._)("div",d,[(0,a.wy)((0,a._)("input",{class:"form-input",type:"radio",name:"repeat",value:"0","onUpdate:modelValue":t[5]||(t[5]=function(e){return P.management.repeat=e})},null,512),[[r.G2,P.management.repeat]]),c,m,(0,a.wy)((0,a._)("input",{class:"form-input",type:"radio",name:"repeat",value:"1","onUpdate:modelValue":t[6]||(t[6]=function(e){return P.management.repeat=e}),checked:""},null,512),[[r.G2,P.management.repeat]]),g,(0,a.wy)((0,a._)("input",{class:"form-input",type:"radio",name:"repeat",value:"7","onUpdate:modelValue":t[7]||(t[7]=function(e){return P.management.repeat=e})},null,512),[[r.G2,P.management.repeat]]),h,(0,a.wy)((0,a._)("input",{class:"form-input",type:"radio",name:"repeat",value:"30","onUpdate:modelValue":t[8]||(t[8]=function(e){return P.management.repeat=e})},null,512),[[r.G2,P.management.repeat]]),p,(0,a.wy)((0,a._)("input",{class:"form-input",type:"radio",name:"repeat",value:"-1","onUpdate:modelValue":t[9]||(t[9]=function(e){return P.management.repeat=e})},null,512),[[r.G2,P.management.repeat]]),f,(0,a.wy)((0,a._)("input",{class:"form-input",type:"radio",name:"repeat",value:"-2","onUpdate:modelValue":t[10]||(t[10]=function(e){return P.management.repeat=e})},null,512),[[r.G2,P.management.repeat]]),v]),(0,a._)("div",D,[(0,a.wy)((0,a._)("textarea",{placeholder:"做什么呢...",rows:"5","onUpdate:modelValue":t[11]||(t[11]=function(e){return P.management.content=e})},null,512),[[r.nr,P.management.content]])]),(0,a._)("div",w,[y,(0,a.wy)((0,a._)("input",{type:"checkbox",class:"circle form-input","onUpdate:modelValue":t[12]||(t[12]=function(e){return P.management.urgent=e}),checked:""},null,512),[[r.e8,P.management.urgent]]),M,(0,a.wy)((0,a._)("input",{type:"checkbox",class:"circle form-input","onUpdate:modelValue":t[13]||(t[13]=function(e){return P.management.important=e})},null,512),[[r.e8,P.management.important]])]),(0,a._)("div",k,[(0,a._)("button",{class:"fill",onClick:t[14]||(t[14]=function(e){return B.addManagement()})},(0,i.zw)(P.updateIndex?"修改计划":"新增计划"),1)])]})),_:1},8,["show"]),(0,a._)("div",b,[(0,a._)("div",_,[(0,a.Wm)(q,{name:"arrow-left",className:"date-item",onClick:B.preWeek},null,8,["onClick"]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(P.currentWeek,(function(e){return(0,a.wg)(),(0,a.iD)("div",{key:e,class:"date-item",onClick:function(t){return B.toDate(B.getFormattedDate(e))}},[B.getFormattedDate(e)==B.getFormattedDate(P.today)?((0,a.wg)(),(0,a.iD)("div",C,[(0,a.Wm)(q,{name:"today"})])):B.getFormattedDate(e)==B.getFormattedDate(P.today,1)?((0,a.wg)(),(0,a.iD)("div",N,[(0,a.Wm)(q,{name:"tomorrow"})])):B.getFormattedDate(e)==B.getFormattedDate(P.today,-1)?((0,a.wg)(),(0,a.iD)("div",W,[(0,a.Wm)(q,{name:"yesterday"})])):((0,a.wg)(),(0,a.iD)("div",I,(0,i.zw)(e.getDate()),1))],8,x)})),128)),(0,a.Wm)(q,{name:"arrow-right",className:"date-item",onClick:B.nextWeek},null,8,["onClick"]),(0,a.Wm)(q,{name:"letter-plus01",className:"date-item",onClick:t[15]||(t[15]=function(e){return B.showAddPlan()})}),(0,a.Wm)(q,{name:"refresh02",class:"update-icon",className:"date-item",onClick:t[16]||(t[16]=function(e){return B.getCurManagementData(P.currentDate)})}),(0,a.Wm)(q,{name:"upload01",className:"date-item",onClick:B.saveJson},null,8,["onClick"])]),(0,a.Uk)(" "+(0,i.zw)(P.currentDate)+" ",1),(0,a._)("div",{class:(0,i.C_)({"quadrant-container":!0,draging:P.draged})},[(0,a.wy)((0,a._)("div",{class:(0,i.C_)(B.dragedManagementClass),ref:"dragedManagement"},[(0,a.Wm)(q,{name:"dot01",size:"16",className:"dot",style:(0,i.j5)(B.dragedDotColor)},null,8,["style"]),(0,a.Uk)(" "+(0,i.zw)(P.dragedManagement?P.dragedManagement.content:""),1)],2),[[r.F8,P.draged]]),((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(4,(function(e){return(0,a._)("div",{class:"quadrant-box",id:"quadrantList".concat(e)},[(0,a._)("div",{class:(0,i.C_)(["quadrant-list"]),onClick:function(t){return B.showAddPlan(e)}},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(P.currentManagementList[e-1],(function(n){return(0,a.wg)(),(0,a.iD)("div",{class:(0,i.C_)(["list-item","item-".concat(e-1)]),onClick:t[19]||(t[19]=(0,r.iM)((function(){}),["stop"])),onPointerdown:function(e){return B.listItemDown(e,n)}},[(0,a._)("div",{class:"content",style:(0,i.j5)({textDecoration:B.itemFinished(n)?"line-through":"none"})},[(0,a.Wm)(q,{name:"dot01",size:"16",className:"dot",style:(0,i.j5)({color:P.fourColors[e-1]})},null,8,["style"]),(0,a.Uk)(" "+(0,i.zw)(n.content),1)],4),(0,a._)("div",{id:"planIndex".concat(n.index),class:"line-content-center"},[(0,a.Wm)(q,{name:"flag01",size:"16",className:"dot",style:(0,i.j5)({color:P.fourColors[e-1]}),onClick:[t[17]||(t[17]=(0,r.iM)((function(){}),["stop"])),function(e){return B.finishItem(n)}]},null,8,["style","onClick"]),(0,a.Wm)(q,{name:"delete02",size:"16",className:"dot",style:(0,i.j5)({color:P.fourColors[e-1]}),onClick:[t[18]||(t[18]=(0,r.iM)((function(){}),["stop"])),function(e){return B.deleteItem(n)}]},null,8,["style","onClick"])],8,V)],42,F)})),256)),(0,a.wy)((0,a._)("div",E,[(0,a._)("div",{class:(0,i.C_)(["list-add-button-".concat(e-1)])},"+",2)],512),[[r.F8,!1]])],8,U)],8,L)})),64)),(0,a.wy)((0,a._)("div",T,Y,512),[[r.F8,!0]]),(0,a.wy)((0,a._)("div",z,j,512),[[r.F8,!0]])],2)],512)],64)}var Z=n(80543),q=n(81448),A=(n(9653),n(92222),n(26699),n(32023),n(41539),n(54747),n(57658),n(40561),n(46086)),G=n(95775),J=n(93438),$={computed:{compareDate:function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e){var n=e.split("/"),a=new Date(Number(n[0]),Number(n[1])-1,Number(n[2])),i=new Date;return i.setDate(i.getDate()+t),"".concat(a.getYear()).concat(a.getMonth()).concat(a.getDate())=="".concat(i.getYear()).concat(i.getMonth()).concat(i.getDate())}return!1}},dragedManagementClass:function(){var e={"list-item":!0,draged:this.draged},t=[2,0,3,1];if(this.dragedManagement){var n=this.dragedManagement.urgent?1:0,a=this.dragedManagement.important?1:0,i=t[2*a+n],r="item-".concat(i);e[r]=!0}return e},dragedDotColor:function(){var e=[2,0,3,1];if(this.dragedManagement){var t=this.dragedManagement.urgent?1:0,n=this.dragedManagement.important?1:0,a=e[2*n+t];return{color:this.fourColors[a]}}},itemFinished:function(){var e=this;return function(t){return t.finishedDate.includes(e.currentDate)}}},components:{calender:A.Z},data:function(){return{fourColors:["#f9A822","#F96635","#2bbaa5","#93d3a2"],currentWeek:[],today:null,currentDate:null,currentManagementList:[[],[],[],[]],modal_show:{addPlanShow:!1},management:{date:null,deadline:null,repeat:0,content:"",urgent:!1,important:!1,repeatDate:[],finishedDate:[]},managementList:[],updateIndex:null,dragedManagement:null,draged:!1,drag2Index:null,pressTimer:null,disx:null,disy:null,ifNeedSave:!1}},mounted:function(){this.fetchJson(),console.log(this.managementList),this.getWeekDate(),this.toDate(this.getFormattedDate(this.today)),window.addEventListener("beforeunload",this.handleBeforeUnload)},unmounted:function(){window.removeEventListener("beforeunload",this.handleBeforeUnload)},methods:{listItemDown:function(e,t){var n=this,a="planIndex".concat(t.index),i=document.getElementById(a);i.contains(e.target)||(document.addEventListener("pointerup",this.listItemUp),document.addEventListener("pointermove",this.listItemMove),this.dragedManagement=t,this.pressTimer=setTimeout((function(){n.draged=!0;var t=e.target;n.disx=e.pageX-t.offsetLeft,n.disy=e.pageY-t.offsetTop;var a=n.$refs.dragedManagement;a.style.left="".concat(e.pageX-n.disx,"px"),a.style.top="".concat(e.pageY-n.disy,"px"),clearTimeout(n.pressTimer),n.pressTimer=null}),500))},listItemMove:function(){if(this.draged){var e=document.getElementById("quadrantList4").getBoundingClientRect(),t=e.left,n=e.top,a=4;event.clientX<t?a=event.clientY<n?1:3:event.clientY<n&&(a=2),this.drag2Index=a;var i=this.$refs.dragedManagement;i.style.left="".concat(event.pageX-this.disx,"px"),i.style.top="".concat(event.pageY-this.disy,"px")}},listItemUp:function(e){if(this.pressTimer&&(clearTimeout(this.pressTimer),this.showAddPlan(this.dragedManagement),this.updateIndex=this.dragedManagement.index,this.dragedManagement=null),null!=this.dragedManagement){switch(this.drag2Index){case 1:this.dragedManagement.urgent=!0,this.dragedManagement.important=!1;break;case 2:this.dragedManagement.urgent=!0,this.dragedManagement.important=!0;break;case 3:this.dragedManagement.urgent=!1,this.dragedManagement.important=!1;break;case 4:this.dragedManagement.urgent=!1,this.dragedManagement.important=!0;break}this.updateManagement(this.dragedManagement)}this.draged=!1,this.dragedManagement=null,this.drag2Index=null,this.getCurManagementData(this.currentDate),document.removeEventListener("pointerup",this.listItemUp),document.removeEventListener("pointermove",this.listItemMove)},deleteItem:function(e){this.deleteManagement(e),this.getCurManagementData(this.currentDate)},finishItem:function(e){var t=this,n=null;e.finishedDate.forEach((function(e,a){t.currentDate!=e||(n=a)})),console.log(n),null==n?e.finishedDate.push(this.currentDate):e.finishedDate.splice(n,1),this.updateManagement(e),this.getCurManagementData(this.currentDate)},updateManagement:function(e){var t=e.index;delete e.index,this.managementList[t]=e,this.ifNeedSave=!0},deleteManagement:function(e){var t=e.index;this.managementList.splice(t,1),this.ifNeedSave=!0},toDate:function(e){this.getCurManagementData(e),this.currentDate=e},compare2Date:function(e,t){var n=new Date(e.split("T")[0]),a=new Date(t.split("T")[0]),i=n.getTime(),r=a.getTime();return i<r?-1:i>r?1:0},daysBetween:function(e,t){var n=e.split("/"),a=new Date(Number(n[0]),Number(n[1])-1,Number(n[2]));n=t.split("/");var i=new Date(Number(n[0]),Number(n[1])-1,Number(n[2])),r=864e5;return Math.round(Math.abs((a-i)/r))},getCurManagementData:function(e){var t=this;this.currentManagementList=[[],[],[],[]],this.managementList.forEach((function(n,a){if(0==t.compare2Date(e,n.date))t.pushCurManagement(a,n);else if(1==t.compare2Date(e,n.date)){var i=Number(n.repeat);i>0&&t.daysBetween(e,n.date)%i==0?t.pushCurManagement(a,n):-1==i?e.split("/")[1]==n.date.split("/")[1]&&e.split("/")[2]==n.date.split("/")[2]&&t.pushCurManagement(a,n):-2==i&&n.repeatDate.includes(e)&&t.pushCurManagement(a,n)}}))},pushCurManagement:function(e,t){var n=[2,0,3,1],a=t.urgent?1:0,i=t.important?1:0;t.index=e,this.currentManagementList[n[2*i+a]].push(t)},getDate:function(e){var t=e.split("/"),n=new Date(Number(t[0]),Number(t[1])-1,Number(t[2]));return n},getFormattedDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new Date(e);t&&n.setDate(n.getDate()+t);var a=n.getFullYear(),i=n.getMonth()+1,r=n.getDate();return"".concat(a,"/").concat(i,"/").concat(r)},initManagementDate:function(){this.updateIndex=null,this.management={date:null,deadline:null,repeat:0,content:"",urgent:!1,important:!1,repeatDate:[],finishedDate:[]}},addManagement:function(){var e=this,t=this.management;if(t.date&&t.content){if(-2==t.repeat){var n=this.getDate(t.date),a=[0,1,3,7,14,29,59];t.repeatDate=[],a.forEach((function(a){t.repeatDate.push(e.getFormattedDate(n,a))}))}this.updateIndex?(this.managementList[this.updateIndex]=this.management,this.$toast.show("修改成功","success"),this.updateIndex=null,this.modal_show.addPlanShow=!1):(this.managementList.push(this.management),this.$toast.show("添加成功","success"),this.modal_show.addPlanShow=!1)}else this.$toast.show("时间或内容不得为空","error");console.log(this.managementList),this.ifNeedSave=!0},getManagementDate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new Date;t.setDate(t.getDate()+e),this.management.date="".concat(t.getYear()+1900,"/").concat(t.getMonth()+1>10?"":0).concat(t.getMonth()+1,"/").concat(t.getDate()>10?"":0).concat(t.getDate())},showAddPlan:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this.draged){if(null==e)this.initManagementDate();else if([1,2,3,4].includes(e))switch(this.initManagementDate(),e){case 1:this.management.urgent=!0,this.management.important=!1;break;case 2:this.management.urgent=!0,this.management.important=!0;break;case 3:this.management.urgent=!1,this.management.important=!1;break;case 4:this.management.urgent=!1,this.management.important=!0;break}else this.management=e;this.modal_show.addPlanShow=!0}},preWeek:function(){var e=new Date(this.currentWeek[0]);e.setDate(e.getDate()-7),this.getWeekDate(e)},nextWeek:function(){var e=new Date(this.currentWeek[0]);e.setDate(e.getDate()+7),this.getWeekDate(e)},getWeekDate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=function(e,t){var n=new Date(e);return n.setDate(n.getDate()-t),n};this.today=new Date,e=e?new Date(e):t(this.today,this.today.getDay());for(var n=0;n<7;n++)this.currentWeek[n]=t(e,-n)},fetchJson:function(){var e=this;return(0,q.Z)((0,Z.Z)().mark((function t(){var n,a;return(0,Z.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=(0,G.JU)(J.db,"jsonfiles","managementjson"),t.next=4,(0,G.QT)(n);case 4:a=t.sent,a.exists()?(e.managementList=a.data().tasks,e.getCurManagementData(e.currentDate),console.log("Document data:",e.jsonData)):console.log("No such document!"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.error("Error fetching document:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},saveJson:function(){var e=this;return(0,q.Z)((0,Z.Z)().mark((function t(){var n;return(0,Z.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.managementList,t.prev=1,t.next=4,(0,G.pl)((0,G.JU)(J.db,"jsonfiles","managementjson"),{tasks:n});case 4:e.ifNeedSave=!1,console.log("Document successfully written!"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.error("Error writing document:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},handleBeforeUnload:function(e){if(this.ifNeedSave){var t="你有未保存的更改，是否保存并离开";return e.returnValue=t,t}},confirmLeave:function(e,t,n){if(this.ifNeedSave){var a=window.confirm("你有未保存的更改，确定要离开吗？");a?n():n(!1)}else n()}},beforeRouteLeave:function(e,t,n){this.confirmLeave(e,t,n)}},H=n(48998);const K=(0,H.Z)($,[["render",B]]);var X=K}}]);
//# sourceMappingURL=6321-legacy.cba9e3a5.js.map
"use strict";(self["webpackChunkaugest"]=self["webpackChunkaugest"]||[]).push([[6086],{6086:function(e,t,i){i.d(t,{Z:function(){return E}});var s=i(9812),n=i(5893);const a={ref:"calendar"},r={key:0,class:"input-container"},l=["value"],o={key:1,class:"input-container"},h=["value"],c={class:"date-select"},d={class:"cows title"},u={key:0,class:"cows",style:{"border-bottom":"var(--box-border)"}},m={class:"date"},p={class:"content title"},y={key:1,class:"cows"},g=["onClick"],w={class:"content"},v={key:2,class:"cows"},D=["onClick"],T={class:"content"},f={key:3,class:"cows"},C=["onClick"],H={class:"content"},M={key:4,class:"cows title"},Y={key:0,class:"time-select"};function k(e,t,i,k,b,x){const $=(0,s.up)("svg-icon");return(0,s.wg)(),(0,s.iD)("div",a,["input"==i.type?((0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("input",{value:b.selectedDate?b.selectedDate.split("T")[0]:"yyyy/mm/dd",type:"text",onInput:t[0]||(t[0]=t=>e.$emit("update:modelValue",t.target.value))},null,40,l),(0,s.Wm)($,{name:"calendar",class:"input-icon",size:"18",onClick:t[1]||(t[1]=e=>x.openCalendar())})])):"datetime"==i.type?((0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("input",{value:b.selectedDate?b.selectedDate.split("T").join(" "):"yyyy/mm/dd --:--",type:"text",onInput:t[2]||(t[2]=t=>e.$emit("update:modelValue",t.target.value))},null,40,h),(0,s.Wm)($,{name:"calendar-datetime",class:"input-icon",size:"18",onClick:t[3]||(t[3]=e=>x.openCalendar())})])):(0,s.kq)("",!0),(0,s._)("div",{ref:"calendarContainer",class:(0,n.C_)({"calendar-container":!0,input:"calendar"!=i.type,show:b.show})},[(0,s._)("div",c,[(0,s._)("div",d,[(0,s.Wm)($,{name:"arrow-left",onClick:t[4]||(t[4]=e=>x.pre()),size:"input"==i.type?16:25},null,8,["size"]),(0,s._)("div",{style:{"font-family":"SmileySans-Oblique"},onClick:t[5]||(t[5]=e=>b.viewType=b.viewType?b.viewType-1:0)},(0,n.zw)(x.calendarTitle),1),(0,s.Wm)($,{name:"arrow-right",onClick:t[6]||(t[6]=e=>x.next()),size:"input"==i.type?16:25},null,8,["size"])]),2==b.viewType?((0,s.wg)(),(0,s.iD)("div",u,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(7,(e=>(0,s._)("div",m,[(0,s._)("div",p,(0,n.zw)(b.weekTitle[e-1]),1)]))),64))])):(0,s.kq)("",!0),2==b.viewType?((0,s.wg)(),(0,s.iD)("div",y,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(b.currentDates,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:(0,n.C_)({date:!0,notCur:x.notCurClass(t),today:x.todayClass(e)&&!x.notCurClass(t)}),onClick:e=>x.selectDate(t)},[(0,s._)("div",w,(0,n.zw)(e),1)],10,g)))),256))])):1==b.viewType?((0,s.wg)(),(0,s.iD)("div",v,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(16,(e=>(0,s._)("div",{class:(0,n.C_)({date:!0,month:!0,notCur:x.notCurClass(e-1),today:x.todayClass(e)}),onClick:t=>x.toMonth(e)},[(0,s._)("div",T,(0,n.zw)((e-1)%12+1),1)],10,D))),64))])):((0,s.wg)(),(0,s.iD)("div",f,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(b.current16Years,(e=>((0,s.wg)(),(0,s.iD)("div",{class:(0,n.C_)({date:!0,month:!0,notCur:x.notCurClass(e),today:x.todayClass(e)}),onClick:t=>x.toYear(e)},[(0,s._)("div",H,(0,n.zw)(e),1)],10,C)))),256))])),"calendar"!=i.type?((0,s.wg)(),(0,s.iD)("div",M,[(0,s._)("button",{class:"input-button text",onClick:t[7]||(t[7]=e=>x.selectDate(-1))},"今天"),"datetime"==i.type?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"text input-button",onClick:t[8]||(t[8]=e=>x.selectNowTime(e))},"现在")):(0,s.kq)("",!0)])):(0,s.kq)("",!0)]),"datetime"==i.type?((0,s.wg)(),(0,s.iD)("div",Y,[(0,s._)("div",{class:"time-scroll",onWheel:t[9]||(t[9]=(...e)=>x.wheelHourEvent&&x.wheelHourEvent(...e)),onPointerdown:t[10]||(t[10]=(...e)=>x.hourDownHandler&&x.hourDownHandler(...e))},[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(24,(e=>(0,s._)("div",{class:"time hour",ref_for:!0,ref:"hour"},(0,n.zw)(e>10?e-1:"0"+(e-1)),513))),64))],32),(0,s._)("div",{class:"time-scroll",onWheel:t[11]||(t[11]=(...e)=>x.wheelMinEvent&&x.wheelMinEvent(...e)),onPointerdown:t[12]||(t[12]=(...e)=>x.minDownHandler&&x.minDownHandler(...e))},[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(60,(e=>(0,s._)("div",{class:"time min",ref_for:!0,ref:"min"},(0,n.zw)(e>10?e-1:"0"+(e-1)),513))),64))],32)])):(0,s.kq)("",!0)],2)],512)}var b={props:{language:{type:String,default:"EN"},type:{type:String,default:"calendar"},modelValue:[String,Number]},watch:{modelValue(e){this.selectedDate=e}},computed:{calendarTitle(){return 2==this.viewType?`${this.monthTitle[this.currentMonth]} ${this.currentYear}`:1==this.viewType?`${this.currentYear}`:`${10*Math.floor(this.currentYear/10)}-${10*Math.floor(this.currentYear/10)+9}`},todayClass(){return e=>{const t=this.today.getYear()+1900;if(t==e)return!0;const i=this.today.getMonth();return t==this.currentYear&&i==e-1&&1==this.viewType||t==this.currentYear&&i==this.currentMonth&&e==this.today.getDate()}},notCurClass(){return e=>2==this.viewType&&(e<this.firstIndex||e>this.lastIndex)||(1==this.viewType&&e>=12||0==this.viewType&&(e<10*Math.floor(this.currentYear/10)||e>10*Math.floor(this.currentYear/10)+9))}},data(){return{monthTitle:["Jan.","Feb.","Mar.","Apr.","May.","Jun.","Jul.","Aug.","Sep.","Oct.","Nov.","Dec."],monthTitleEN:["Jan.","Feb.","Mar.","Apr.","May.","Jun.","Jul.","Aug.","Sep.","Oct.","Nov.","Dec."],monthTitleEN:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一","十二"],weekTitle:["S","M","T","W","T","F","S"],weekDayCN:["日","一","二","三","四","五","六"],weekDayEN:["S","M","T","W","T","F","S"],currentDates:[],currentMonth:null,currentYear:null,current16Years:[],today:null,firstIndex:0,lastIndex:0,todayIndex:null,viewType:2,show:!1,selectedDate:this.modelValue,log:"",timeHeight:null,selectedTime:"--:--",startTime:null,downPointer:null}},mounted(){"CN"==this.language&&(this.monthTitle=this.monthTitleEN,this.weekTitle=this.weekDayCN),"calendar"==this.type&&(this.show=!0),this.init()},unmounted(){document.removeEventListener("click",this.closeCalendar)},methods:{minDownHandler(e){this.downPointer={x:e.pageX,y:e.pageY},this.startTime=this.selectedTime,document.addEventListener("pointermove",this.minMoveHandler),document.addEventListener("pointerup",this.timeUpHandler)},minMoveHandler(e){if(this.downPointer){const t=e.pageY-this.downPointer.y;let i=Math.floor(Math.abs(t)/this.timeHeight);const s=Number(this.startTime.split(":")[1])+(t<0?i:-i);this.wheelMinEvent(e,s)}},hourDownHandler(e){this.downPointer={x:e.pageX,y:e.pageY},this.startTime=this.selectedTime,document.addEventListener("pointermove",this.hourMoveHandler),document.addEventListener("pointerup",this.timeUpHandler)},hourMoveHandler(e){if(this.downPointer){const t=e.pageY-this.downPointer.y;let i=Math.floor(Math.abs(t)/this.timeHeight);const s=Number(this.startTime.split(":")[0])+(t<0?i:-i);this.wheelHourEvent(e,s)}},timeUpHandler(){this.downPointer&&(this.downPointer=null,document.removeEventListener("pointermove",this.minMoveHandler),document.removeEventListener("pointermove",this.hourMoveHandler),document.removeEventListener("pointerup",this.timeUpHandler))},wheelHourEvent(e,t=null){e.preventDefault();let i=null!=t?t-Number(this.selectedTime.split(":")[0]):1,s=t?i>0?100:-100:e.deltaY;i=Math.abs(i);while(i--)this.$refs.hour.forEach(((e,t)=>{let i=Number(e.style.top.split("px")[0])+(100==s?-this.timeHeight:this.timeHeight);if(i<-this.timeHeight?i=22*this.timeHeight:i>22*this.timeHeight&&(i=-this.timeHeight),e.style.top=`${i}px`,i==3*this.timeHeight){e.style.backgroundColor="var(--main-color)";let t=this.selectedTime.split(":");t[0]=e.innerText,this.selectedTime=t.join(":");let i=this.selectedDate.split("T");i[1]=this.selectedTime,this.selectedDate=i.join("T"),this.changeHandler(this.selectedDate)}else e.style.backgroundColor="transparent"}))},wheelMinEvent(e,t=null){event.preventDefault();let i=null!=t?t-Number(this.selectedTime.split(":")[1]):1,s=t?i>0?100:-100:event.deltaY;i=Math.abs(i);while(i--)this.$refs.min.forEach(((e,t)=>{let i=Number(e.style.top.split("px")[0])+(100==s?-this.timeHeight:this.timeHeight);if(i<-this.timeHeight?i=58*this.timeHeight:i>58*this.timeHeight&&(i=-this.timeHeight),e.style.top=`${i}px`,i==3*this.timeHeight){e.style.backgroundColor="var(--main-color)";let t=this.selectedTime.split(":");t[1]=e.innerText,this.selectedTime=t.join(":");let i=this.selectedDate.split("T");i[1]=this.selectedTime,this.selectedDate=i.join("T"),this.changeHandler(this.selectedDate)}else e.style.backgroundColor="transparent"}))},selectNowTime(e){this.selectDate(-1);const t=new Date;this.wheelHourEvent(e,t.getHours()),this.wheelMinEvent(e,t.getMinutes())},changeHandler(e){this.$emit("update:modelValue",e)},init(){this.today=new Date,this.currentMonth=this.today.getMonth(),this.currentYear=1900+this.today.getYear(),this.getDates(this.currentYear,this.currentMonth),this.get16Years()},getDates(e=this.currentYear,t=this.currentMonth){const i=new Date(e,t,0),s=new Date(e,t,1),n=new Date(e,t+1,0);for(var a=0;a<42;a++){let e=a-s.getDay()+1;1==e?this.firstIndex=a:e==n.getDate()?this.lastIndex=a:e==this.today.getDate()&&this.currentMonth==this.today.getMonth()&&this.currentYear==this.today.getYear()+1900?this.todayIndex=a:e>n.getDate()?e-=n.getDate():e<1&&(e+=i.getDate()),this.currentDates[a]=e}},get16Years(e=this.currentYear){const t=10*Math.floor(e/10),i=(t-1900)%4,s=t-i;for(let n=0;n<16;n++)this.current16Years[n]=s+n},changeMonth(e){this.todayIndex=null;const t=this.currentMonth+e;this.currentMonth=t%12>=0?t%12:11,this.currentYear=t%12>=0?this.currentYear+Math.floor(t/12):this.currentYear-1+Math.ceil(t/12),this.getDates()},toYear(e){this.currentYear=e,this.viewType=1},toMonth(e){this.currentMonth=(e-1)%12,this.currentYear+=Math.floor((e-1)/12),this.viewType=2,this.getDates()},pre(){2==this.viewType?this.changeMonth(-1):1==this.viewType?this.currentYear--:(this.currentYear-=10,this.get16Years())},next(){2==this.viewType?this.changeMonth(1):1==this.viewType?this.currentYear++:(this.currentYear+=10,this.get16Years())},openCalendar(){const e=this.$refs.calendarContainer;e.style.top=null,e.style.display="flex";const t=e.clientHeight,i=this.$refs.calendar.getBoundingClientRect();let s=this.$refs.calendar.offsetTop;const n=window.innerHeight-i.bottom;n>t?s+=i.height:s-=t,this.show?(setTimeout((()=>{this.$refs.calendarContainer.style.display="none"}),300),this.show=!1,document.removeEventListener("click",this.closeCalendar)):(this.show=!0,document.addEventListener("click",this.closeCalendar)),e.style.top=s+"px","datetime"!=this.type||this.timeHeight||(this.timeHeight=this.$refs.hour[0].clientHeight,this.$refs.hour.forEach(((e,t)=>{if(e.style.top=(t-1)*this.timeHeight+"px",4==t){e.style.backgroundColor="var(--main-color)";let t=this.selectedTime.split(":");t[0]=e.innerText,this.selectedTime=t.join(":")}})),this.$refs.min.forEach(((e,t)=>{if(e.style.top=(t-1)*this.timeHeight+"px",4==t){e.style.backgroundColor="var(--main-color)";let t=this.selectedTime.split(":");t[1]=e.innerText,this.selectedTime=t.join(":"),this.selectedDate=this.selectedDate?this.selectedDate:"yyyy/mm/ddT00:00";let i=this.selectedDate.split("T");i[1]=this.selectedTime,this.selectedDate=i.join("T")}})))},closeCalendar(e){this.$refs.calendar.contains(e.target)||(setTimeout((()=>{this.$refs.calendarContainer.style.display="none"}),300),this.show=!1,document.removeEventListener("click",this.closeCalendar))},selectDate(e){if(this.selectedDate=this.selectedDate?this.selectedDate:"yyyy/mm/ddT00:00",-1==e){this.init();const e=this.today;let t=this.selectedDate.split("T");return t[0]=`${e.getYear()+1900}/${e.getMonth()+1>10?"":0}${e.getMonth()+1}/${e.getDate()>10?"":0}${e.getDate()}`,void(this.selectedDate=t.join("T"))}let t=this.currentMonth;e<this.firstIndex?t-=1:e>this.lastIndex&&(t+=1);const i=new Date(this.currentYear,t,this.currentDates[e]);let s=this.selectedDate.split("T");s[0]=`${i.getYear()+1900}/${i.getMonth()+1>10?"":0}${i.getMonth()+1}/${i.getDate()>10?"":0}${i.getDate()}`,this.selectedDate=s.join("T"),this.show&&"calendar"!=this.type&&(setTimeout((()=>{this.$refs.calendarContainer.style.display="none"}),300),this.show=!1,document.removeEventListener("click",this.closeCalendar)),this.changeHandler(this.selectedDate)}}},x=i(8998);const $=(0,x.Z)(b,[["render",k],["__scopeId","data-v-1211b98a"]]);var E=$}}]);
//# sourceMappingURL=6086.82e58571.js.map